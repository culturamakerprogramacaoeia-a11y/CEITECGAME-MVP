{% extends "base.html" %}
{% block title %}Hist√≥rico de Pontua√ß√µes{% endblock %}

{% block content %}
<div class="page-title glow-text">
  <i class="bi bi-clock-history"></i> HIST√ìRICO COMPLETO
</div>

{% if pontuacoes %}
<div class="card">
  <div class="card-body p-0">
    <table class="table-dark-custom w-100">
      <thead>
        <tr>
          <th>MISS√ÉO</th>
          <th>CATEGORIA</th>
          <th>XP</th>
          <th>TECCOINS</th>
          <th>OBSERVA√á√ÉO</th>
          <th>DATA</th>
        </tr>
      </thead>
      <tbody>
        {% for p in pontuacoes %}
        <tr>
          <td><strong>{{ p.missao.titulo }}</strong></td>
          <td style="color:var(--text-muted);">{{ p.missao.categoria }}</td>
          <td><span class="xp-badge">+{{ p.xp_recebido }}</span></td>
          <td><span class="tc-badge">+{{ p.teccoins_recebido }}</span></td>
          <td style="color:var(--text-muted); font-size:0.85rem;">
            {{ p.obs if p.obs else '‚Äî' }}
          </td>
          <td style="color:var(--text-muted); font-size:0.85rem;">
            {{ p.data.strftime('%d/%m/%Y %H:%M') }}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="card-footer" style="background:var(--bg-card2); border-top:1px solid var(--border);">
    <span class="xp-badge">Total: {{ pontuacoes|sum(attribute='xp_recebido') }} XP</span>
    &nbsp;¬∑&nbsp;
    <span class="tc-badge">ü™ô {{ pontuacoes|sum(attribute='teccoins_recebido') }} TecCoins ganhas</span>
  </div>
</div>
{% else %}
<div class="card">
  <div class="card-body text-center py-5" style="color:var(--text-muted);">
    <i class="bi bi-inbox" style="font-size:3rem; color:var(--accent2);"></i>
    <p class="mt-2">Nenhuma pontua√ß√£o registrada ainda.</p>
    <p style="font-size:0.85rem;">Pe√ßa ao professor para lan√ßar suas primeiras pontua√ß√µes!</p>
  </div>
</div>
{% endif %}
{% endblock %}
