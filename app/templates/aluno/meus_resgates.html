{% extends "base.html" %}
{% block title %}Meus Resgates{% endblock %}

{% block content %}
<div class="page-title glow-text">
  <i class="bi bi-bag-fill"></i> MEUS RESGATES
</div>

{% if resgates %}
<div class="card">
  <div class="card-body p-0">
    <table class="table-dark-custom w-100">
      <thead>
        <tr>
          <th>RECOMPENSA</th>
          <th>CUSTO</th>
          <th>DATA</th>
          <th>STATUS</th>
        </tr>
      </thead>
      <tbody>
        {% for r in resgates %}
        <tr>
          <td>
            <strong>{{ r.recompensa.nome }}</strong>
            {% if r.recompensa.descricao %}
            <br><small style="color:var(--text-muted);">{{ r.recompensa.descricao[:60] }}</small>
            {% endif %}
          </td>
          <td><span class="tc-badge">ü™ô {{ r.recompensa.custo_teccoins }}</span></td>
          <td style="color:var(--text-muted); font-size:0.85rem;">
            {{ r.data.strftime('%d/%m/%Y %H:%M') }}
          </td>
          <td>
            {% if r.status == 'pendente' %}
              <span style="color:#fbbf24; font-weight:700;">‚è≥ Pendente</span>
            {% elif r.status == 'aprovado' %}
              <span style="color:var(--accent); font-weight:700;">‚úÖ Aprovado</span>
            {% else %}
              <span style="color:#f87171; font-weight:700;">‚ùå Recusado</span>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% else %}
<div class="card">
  <div class="card-body text-center py-5" style="color:var(--text-muted);">
    <i class="bi bi-bag" style="font-size:3rem; color:var(--accent2);"></i>
    <p class="mt-2">Voc√™ ainda n√£o fez nenhum resgate.</p>
    <a href="{{ url_for('aluno.loja') }}" class="btn btn-accent">
      Ir para a Loja
    </a>
  </div>
</div>
{% endif %}
{% endblock %}
