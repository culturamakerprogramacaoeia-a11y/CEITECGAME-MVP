{% extends "base.html" %}
{% block title %}LanÃ§ar PontuaÃ§Ã£o{% endblock %}

{% block content %}
<div class="page-title glow-text">
  <i class="bi bi-lightning-fill"></i> LANÃ‡AR PONTUAÃ‡ÃƒO
</div>

<div class="row justify-content-center">
  <div class="col-12 col-md-9 col-lg-7">
    <div class="card">
      <div class="card-header">
        <i class="bi bi-plus-circle"></i> ATRIBUIR XP E TECCOINS
      </div>
      <div class="card-body p-4">
        <form method="POST">

          <!-- Selecionar Aluno -->
          <div class="mb-3">
            <label class="form-label">Aluno *</label>
            <select name="aluno_id" class="form-select" required>
              <option value="" disabled selected>Selecione o aluno...</option>
              {% for aluno in alunos %}
              <option value="{{ aluno.id }}">
                {{ aluno.nome }}
                {% if aluno.turma %} â€“ {{ aluno.turma.nome }}{% endif %}
                ({{ aluno.xp_total }} XP Â· {{ aluno.nivel }})
              </option>
              {% endfor %}
            </select>
          </div>

          <!-- Selecionar MissÃ£o -->
          <div class="mb-3">
            <label class="form-label">MissÃ£o *</label>
            <select name="missao_id" class="form-select" required id="selMissao">
              <option value="" disabled selected>Selecione a missÃ£o...</option>
              {% for m in missoes %}
              <option value="{{ m.id }}"
                      data-xp="{{ m.xp }}" data-tc="{{ m.teccoins }}">
                {{ m.titulo }} (âš¡{{ m.xp }} XP Â· ðŸª™{{ m.teccoins }})
              </option>
              {% endfor %}
            </select>
          </div>

          <!-- BÃ´nus manual (opcional) -->
          <div class="card mb-3" style="background:#12102a; border-color:rgba(124,58,237,0.3);">
            <div class="card-body p-3">
              <p style="color:var(--accent2); font-size:0.85rem; font-weight:700; margin-bottom:0.75rem;">
                <i class="bi bi-star-fill"></i> BÃ”NUS EXTRA (Opcional)
              </p>
              <div class="row g-2">
                <div class="col-6">
                  <label class="form-label">XP Extra</label>
                  <input type="number" name="xp_extra" class="form-control"
                         value="0" min="0" max="500">
                </div>
                <div class="col-6">
                  <label class="form-label">TecCoins Extra</label>
                  <input type="number" name="teccoins_extra" class="form-control"
                         value="0" min="0" max="200">
                </div>
              </div>
            </div>
          </div>

          <!-- ObservaÃ§Ã£o -->
          <div class="mb-4">
            <label class="form-label">ObservaÃ§Ã£o (opcional)</label>
            <textarea name="obs" class="form-control" rows="2"
                      placeholder="Ex: Excelente trabalho, resolveu todos os exercÃ­cios!"></textarea>
          </div>

          <button type="submit" class="btn btn-accent w-100">
            <i class="bi bi-send-fill"></i> LANÃ‡AR PONTUAÃ‡ÃƒO
          </button>
        </form>
      </div>
    </div>

    <!-- Lembrete -->
    <div class="card mt-3" style="border-color: rgba(0,255,136,0.15);">
      <div class="card-body p-3">
        <p style="color:var(--text-muted); font-size:0.85rem; margin:0;">
          <i class="bi bi-info-circle" style="color:var(--accent3);"></i>
          O XP final = XP da missÃ£o + bÃ´nus extra. Mesmo valor para TecCoins.
          O nÃ­vel do aluno Ã© calculado automaticamente.
        </p>
      </div>
    </div>
  </div>
</div>
{% endblock %}
